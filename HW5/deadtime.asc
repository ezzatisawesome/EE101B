Version 4
SHEET 1 880 680
WIRE -304 -128 -400 -128
WIRE -192 -32 -224 -32
WIRE -96 -32 -128 -32
WIRE 272 32 240 32
WIRE 272 48 272 32
WIRE -224 64 -224 -32
WIRE -224 64 -304 64
WIRE -192 64 -224 64
WIRE -96 64 -96 -32
WIRE -96 64 -112 64
WIRE -64 64 -96 64
WIRE 80 64 -64 64
WIRE 240 64 80 64
WIRE 368 80 304 80
WIRE 480 80 368 80
WIRE 624 80 560 80
WIRE -64 96 -64 64
WIRE 240 96 192 96
WIRE 272 128 272 112
WIRE 272 128 240 128
WIRE -64 192 -64 160
WIRE -304 208 -304 64
WIRE -304 208 -432 208
WIRE 96 208 64 208
WIRE 192 208 192 96
WIRE 192 208 176 208
WIRE 240 208 192 208
WIRE 368 208 368 80
WIRE 368 208 320 208
WIRE 64 224 64 208
WIRE -192 256 -224 256
WIRE -96 256 -128 256
WIRE 272 320 240 320
WIRE 272 336 272 320
WIRE -304 352 -304 208
WIRE -224 352 -224 256
WIRE -224 352 -304 352
WIRE -192 352 -224 352
WIRE -96 352 -96 256
WIRE -96 352 -112 352
WIRE -64 352 -96 352
WIRE 80 352 -64 352
WIRE 240 352 80 352
WIRE 368 368 304 368
WIRE 480 368 368 368
WIRE 624 368 560 368
WIRE -64 384 -64 352
WIRE 240 384 192 384
WIRE 272 416 272 400
WIRE 272 416 240 416
WIRE -64 480 -64 448
WIRE 96 496 64 496
WIRE 192 496 192 384
WIRE 192 496 176 496
WIRE 240 496 192 496
WIRE 368 496 368 368
WIRE 368 496 320 496
WIRE 64 512 64 496
WIRE -288 528 -384 528
FLAG 64 224 0
FLAG -64 192 0
FLAG 64 512 0
FLAG -64 480 0
FLAG 624 80 gp
IOPIN 624 80 Out
FLAG 624 368 gn
IOPIN 624 368 Out
FLAG -432 208 pwm
IOPIN -432 208 In
FLAG 80 64 vrcp
FLAG 80 352 vrcm
FLAG -400 -128 vcc
IOPIN -400 -128 In
FLAG -304 -128 vcc
FLAG -384 528 vee
IOPIN -384 528 In
FLAG -288 528 vee
FLAG 240 32 vcc
FLAG 240 128 vee
FLAG 240 320 vcc
FLAG 240 416 vee
SYMBOL diode -128 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res 336 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 192 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 5k
SYMBOL cap -80 96 R0
SYMATTR InstName C1
SYMATTR Value 20p
SYMBOL res -96 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 576 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 5
SYMBOL diode -192 272 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL res 336 480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL res 192 480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 5k
SYMBOL cap -80 384 R0
SYMATTR InstName C2
SYMATTR Value 20p
SYMBOL res -96 336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res 576 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 5
SYMBOL Opamps\\UniversalOpamp2 272 80 R0
SYMATTR InstName U2
SYMATTR Value2 Avol=1Meg GBW=10Gig Slew=10Gig
SYMATTR SpiceLine ilimit=2 rail=0 Vos=0 phimargin=45
SYMBOL Opamps\\UniversalOpamp2 272 368 R0
SYMATTR InstName U1
SYMATTR Value2 Avol=1Meg GBW=10Gig Slew=10Gig
SYMATTR SpiceLine ilimit=2 rail=0 Vos=0 phimargin=45
